/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","./BaseController","./util/TreeUtil","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(q,B,T,F,a){"use strict";var b=300;var M=B.extend("sap.ui.documentation.sdk.controller.MasterTreeBaseController",{_initTreeUtil:function(n,d){this._oTreeUtil=new T(n,d);},_expandTreeToNode:function(t,m){var o=this.byId("tree"),d=m.getData();var e=this._oTreeUtil.getPathToNode(t,d);var l;e.forEach(function(i){var I=this._findTreeItem(i);if(I){o.getBinding("items").expand(o.indexOfItem(I));l=I;}},this);if(l){l.setSelected(true);q.sap.delayedCall(0,this,function(){if(l.getDomRef()&&!c(l.getDomRef())){this._scrollTreeItemIntoView(l);}});}},_findTreeItem:function(I){var t=this.byId("tree");var o=t.getItems();for(var i=0;i<o.length;i++){var C=o[i].getCustomData()[0];if(C.getKey()==="nodeId"&&C.getValue()===I){return o[i];}}return null;},_scrollTreeItemIntoView:function(i){var p=this.byId("page");p.scrollToElement(i.getDomRef(),b);},onTreeFilter:function(e){var t=this.byId("tree");var f=e.getParameter("newValue").trim();var o=t.getBinding("items");if(this._filterTimeout){q.sap.clearDelayedCall(this._filterTimeout);}this._filterTimeout=q.sap.delayedCall(250,this,function(){if(f.length===0){o.filter([]);this._collapseAllNodes();return;}var d=[];if(f){var n=new F("name",a.Contains,f);d.push(n);}o.filter(d);this._expandAllNodes();this._filterTimeout=null;});},_expandAllNodes:function(){var t=this.byId("tree");t.expandToLevel(10);},_collapseAllNodes:function(){var t=this.byId("tree");t.collapseAll();},_clearSelection:function(){var t=this.byId("tree"),i=t.getItems();if(i.length){i[0].setSelected(false);}},_expandFirstNodeOnly:function(){var t=this.byId("tree");this._collapseAllNodes();t.getBinding("items").expand(0);},onTreeExpandAll:function(e){this._expandAllNodes();},onTreeCollapseAll:function(e){this._collapseAllNodes();}});function c(d){var r=d.getBoundingClientRect();return(r.top>=0&&r.left>=0&&r.bottom<=q(document).height()&&r.right<=q(document).width());}return M;});
