/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/documentation/sdk/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/documentation/sdk/controller/util/XML2JSONUtils","sap/ui/Device","sap/ui/documentation/sdk/util/ToggleFullScreenHandler"],function(B,J,X,D,T){"use strict";return B.extend("sap.ui.documentation.sdk.controller.TopicDetail",{onInit:function(){this.oPage=this.byId("topicDetailPage");this.oPage.addStyleClass('docuPage');if(!window.prettyPrint){jQuery.sap.require("sap.ui.documentation.sdk.thirdparty.google-code-prettify.prettify");}this.getRouter().getRoute("topicId").attachPatternMatched(this._onTopicMatched,this);this._oConfig=this.getConfig();this.jsonDefModel=new J();this.getView().setModel(this.jsonDefModel);},onBeforeRendering:function(){D.orientation.detachHandler(this._onOrientationChange,this);},onAfterRendering:function(){D.orientation.attachHandler(this._onOrientationChange,this);},onExit:function(){D.orientation.detachHandler(this._onOrientationChange,this);},_onTopicMatched:function(e){var t=e.getParameter("arguments").id,a=this._oConfig.docuPath+t+(t.match(/\.html/)?"":".html"),h=jQuery.sap.syncGetText(a).data,j;if(!h){return;}j=X.XML2JSON(h,this._oConfig);j.topicURL=a;this.jsonDefModel.setData(j);this._scrollContentToTop();setTimeout(window.prettyPrint,0);this.searchResultsButtonVisibilitySwitch(this.getView().byId("topicDetailBackToSearch"));if(this.extHookonTopicMatched){this.extHookonTopicMatched(t);}},_scrollContentToTop:function(){if(this.oPage&&this.oPage.$().length>0){this.oPage.getScrollDelegate().scrollTo(0,1);}},_formatHTML:function(h){return'<div>'+h+'</div>';},_onOrientationChange:function(e){var p=this.getView().byId("topicDetailPage");if(e.landscape){p.setShowHeader(false);}else{p.setShowHeader(true);}},backToSearch:function(t){this.onNavBack();},onToggleFullScreen:function(e){T.updateMode(e,this.getView(),this);}});});
